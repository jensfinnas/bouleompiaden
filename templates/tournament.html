{% extends 'base.html' %}

{% block title %}
  Bouleympiaden: {{tournament.year}}
{% endblock %}

{% block content %}

<div class="jumbotron">
    <h1>Bouleympiaden: {{tournament.year}}</h1>

    <p class="lead margin-top-30">
        <strong>ü•á Guld:</strong> {{tournament.gold}}</br>
        <strong>ü•à Silver:</strong> {{tournament.silver}}</br>
        {% if tournament.bronze %}
          <strong>ü•â Brons:</strong> {{tournament.bronze}}</br>      
        {% endif %}

    </p>
</div>

<div class="card bg-light mb-3">
  <div class="card-body">
    <h4 class="card-title mb-2">Slutspelet</h4>

    {% for stage in tournament.playoff %}
      <h5>{{stage.stage|capitalize}}</h5>

      <table class="table table-striped">
        {% for game in stage.games %}
          <tr>
            <td class="text-right">
              {% if game.winner == 'p1' %}
                ‚≠ê
              {% endif %}
              <a href="{{url_for('player_index', player_slug=game.p1_name|slugify)}}"
                class="{% if game.winner == 'p1' %}underline-primary{% endif %}">
                {{game.p1_name}}
              </a>          
            </td>
            <td class="text-center">
              {{game.p1_score}}&nbsp;&#8209;&nbsp;{{game.p2_score}}
            </td>
            <td>
              <a href="{{url_for('player_index', player_slug=game.p2_name|slugify)}}"
                 class="{% if game.winner == 'p2' %}underline-primary{% endif %}">
                {{game.p2_name}}
              </a>          
              {% if game.winner == 'p2' %}
                ‚≠ê
              {% endif %}
            </td>
          </tr>
          
        {% endfor %}
  
      </table>
    
    {% endfor %}

  </div>
</div>

<div class="card bg-light mb-3">
  <div class="card-body">
    <h4 class="card-title mb-2">√ñverpresterande spelare</h4>
    <p>
      F√∂r varje spelare r√§knar vi ut en <strong>prestationspo√§ng</strong> f√∂r hela turneringen enligt f√∂ljande:
    </p>
    <p class="text-small">
      <samp>
      + Motst√•ndarens vinstchans i de matcher spelaren vunnit<br>
      ‚Äì Spelaren egen vinstchans i f√∂rlustmatcher<br>
      / Antal matcher
      </samp>
    </p>
    <p>Segrar mot sv√•ra motst√•ndare ger h√∂ga po√§ng. F√∂rluster mot l√§tta motst√•ndare ger stora avdrag.</p>

    <table class="table table-striped">
      <thead>
        <th>Spelare</th>
        <th>Prestations-<br>po√§ng</th>
      </thead> 
      <tbody>
        {% for player in  tournament.top_performers %}
            <tr>
              <td>
                <a href="{{url_for('player_index', player_slug=player.name|slugify)}}">
                  {{player.name}}
                </a>
              </td>
              <td class="text-right">
                {{(player.performance*100)|int}} p
              </td>
            </tr>
        {% endfor %}
      </tbody> 
    </table>
  </div>
</div>

<div class="card bg-light mb-3">
  <div class="card-body">
    <h4 class="card-title">St√∂rsta skr√§llmatcherna</h4>
    <div class="card-text">
      <p>
        Matcher d√§r spelare vann mot allra sv√•raste odds.
      </p>

      <table class="table table-striped">
      <thead>
        <tr>
          <th>Match</th>
          <th>Vinstchans</th>
        </tr>

      </thead>
        <tbody>
          {% for game in tournament.top_low_prob_winners %}
            <tr>
              <td>
                <a href="{{url_for('player_index', player_slug=game.winner_name|slugify)}}">
                  {{game.winner_name|genitive}} 
                </a>
                vinst √∂ver 
                <a href="{{url_for('player_index', player_slug=game.loser_name|slugify)}}">
                  {{game.loser_name}} 
                </a> 
                <small>
                  ({{game.stage}})
                </small>
              </td>
              <td class="text-right">
                {{(game.winner_win_prob*100)|round|int}} %
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>


{% include 'includes/card_year_selector.html' %}
  

{% endblock %}
